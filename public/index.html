<!DOCTYPE html>
<html>
<head>
    <title>Firebase Checker - VirenaLabs</title>
    <style>
        body { 
            background: #1a1a1a; 
            color: white; 
            font-family: Arial; 
            margin: 0; 
            padding: 20px;
        }
        .container { max-width: 800px; margin: 0 auto; }
        .stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin: 20px 0; }
        .stat-card { background: #2d2d2d; padding: 15px; border-radius: 8px; text-align: center; }
        button { 
            background: #0070f3; 
            color: white; 
            border: none; 
            padding: 10px 15px; 
            margin: 5px; 
            border-radius: 5px; 
            cursor: pointer; 
        }
        button:hover { background: #0051a8; }
        #logs { 
            background: black; 
            height: 300px; 
            overflow-y: auto; 
            padding: 15px; 
            border-radius: 8px; 
            margin-top: 20px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üî• Firebase Account Checker</h1>
        <p>VirenaLabs - Vercel Deployment</p>
        
        <div class="stats">
            <div class="stat-card">
                <div id="totalAttempts">0</div>
                <div>Total</div>
            </div>
            <div class="stat-card">
                <div id="successfulLogins" style="color: #4ade80;">0</div>
                <div>Success</div>
            </div>
            <div class="stat-card">
                <div id="failedLogins" style="color: #f87171;">0</div>
                <div>Failed</div>
            </div>
            <div class="stat-card">
                <div id="highCoinAccounts" style="color: #fbbf24;">0</div>
                <div>200k+ Coins</div>
            </div>
        </div>

        <div>
            <button onclick="apiCall('start')">‚ñ∂ Start</button>
            <button onclick="apiCall('stop')">‚èπ Stop</button>
            <button onclick="apiCall('save/highcoin')">üíé Save High Coin</button>
            <button onclick="apiCall('reset')">üîÑ Reset</button>
        </div>

        <div>Status: <span id="status">Stopped</span></div>

        <div id="logs">Waiting for logs...</div>
    </div>

    <script>
        async function apiCall(endpoint) {
            try {
                const response = await fetch(`/api/${endpoint}`, {method: 'POST'});
                const data = await response.json();
                alert(data.message || 'Done');
                updateStats();
            } catch (error) {
                alert('Error: ' + error.message);
            }
        }

        async function updateStats() {
            try {
                const response = await fetch('/api/stats');
                const data = await response.json();
                
                if (data.status === 'success') {
                    const stats = data.data;
                    document.getElementById('totalAttempts').textContent = stats.total_attempts;
                    document.getElementById('successfulLogins').textContent = stats.successful_logins;
                    document.getElementById('failedLogins').textContent = stats.failed_logins;
                    document.getElementById('highCoinAccounts').textContent = stats.high_coin_accounts;
                    document.getElementById('status').textContent = stats.status;
                }
            } catch (error) {
                console.error('Error:', error);
            }
        }

        async function updateLogs() {
            try {
                const response = await fetch('/api/logs');
                const data = await response.json();
                
                if (data.status === 'success') {
                    document.getElementById('logs').innerHTML = 
                        data.data.logs.map(log => `<div>${log}</div>`).join('');
                }
            } catch (error) {
                console.error('Error:', error);
            }
        }

        // Auto-update every 2 seconds
        setInterval(() => {
            updateStats();
            updateLogs();
        }, 2000);

        updateStats();
        updateLogs();
    </script>
</body>
</html>
